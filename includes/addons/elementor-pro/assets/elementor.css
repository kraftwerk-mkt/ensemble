/**
 * Ensemble Elementor Frontend Styles
 * 
 * Additional styles for Elementor widgets
 * Uses CSS Variables from Designer for consistency
 * 
 * @package Ensemble
 * @since 3.1.0
 * @updated 3.2.0 - CSS Variables Integration
 */

/* ============================================
   ELEMENTOR WIDGET WRAPPER OVERRIDES
   ============================================ */

/* Ensure Ensemble styles work within Elementor columns */
.elementor-widget-ensemble-events-grid .es-grid,
.elementor-widget-ensemble-artists-grid .es-grid,
.elementor-widget-ensemble-locations-grid .es-grid {
    display: grid;
    width: 100%;
    gap: var(--ensemble-card-gap, 24px);
}

/* Fix card links in Elementor */
.elementor-widget .es-card a {
    text-decoration: none;
    color: var(--ensemble-primary, #667eea);
}

.elementor-widget .es-card a:hover {
    color: var(--ensemble-hover, #5568d3);
}

/* Calendar widget full width */
.elementor-widget-ensemble-calendar .es-calendar {
    width: 100%;
}

/* ============================================
   ENSURE DESIGNER VARIABLES APPLY IN ELEMENTOR
   ============================================ */

/* Cards in Elementor widgets inherit Designer settings */
.elementor-widget .es-event-card,
.elementor-widget .es-artist-card,
.elementor-widget .es-location-card,
.elementor-widget .es-meta-card,
.elementor-widget .ensemble-event-card {
    background: var(--ensemble-card-bg, #ffffff);
    border: var(--ensemble-card-border-width, 1px) solid var(--ensemble-card-border, #e2e8f0);
    border-radius: var(--ensemble-card-radius, 12px);
    padding: var(--ensemble-card-padding, 24px);
    box-shadow: var(--ensemble-card-shadow, 0 4px 6px rgba(0, 0, 0, 0.1));
}

/* Buttons in Elementor widgets inherit Designer settings */
.elementor-widget .es-btn,
.elementor-widget .es-ticket-button,
.elementor-widget .ensemble-button {
    background: var(--ensemble-button-bg, #667eea);
    color: var(--ensemble-button-text, #ffffff);
    border: var(--ensemble-button-border-width, 2px) solid var(--ensemble-button-bg, #667eea);
    border-radius: var(--ensemble-button-radius, 8px);
    padding: var(--ensemble-button-padding-v, 12px) var(--ensemble-button-padding-h, 24px);
    font-size: var(--ensemble-button-font-size, 16px);
    font-weight: var(--ensemble-button-weight, 600);
    font-family: var(--ensemble-font-body, inherit);
    transition: all 0.3s ease;
}

.elementor-widget .es-btn:hover,
.elementor-widget .es-ticket-button:hover,
.elementor-widget .ensemble-button:hover {
    background: var(--ensemble-button-hover-bg, #5568d3);
    border-color: var(--ensemble-button-hover-bg, #5568d3);
    color: var(--ensemble-button-hover-text, #ffffff);
}

/* Typography in Elementor widgets */
.elementor-widget .es-event-title,
.elementor-widget .es-artist-name,
.elementor-widget .es-location-name {
    font-family: var(--ensemble-font-heading, inherit);
    font-weight: var(--ensemble-heading-weight, 700);
    color: var(--ensemble-text, #1a202c);
}

.elementor-widget .es-meta-item,
.elementor-widget .es-event-meta {
    font-size: var(--ensemble-small-size, 14px);
    color: var(--ensemble-text-secondary, #718096);
}

/* Genre tags in Elementor */
.elementor-widget .es-genre-tag {
    background: var(--ensemble-card-bg, #ffffff);
    color: var(--ensemble-text-secondary, #718096);
    border: 1px solid var(--ensemble-card-border, #e2e8f0);
    border-radius: var(--ensemble-button-radius, 8px);
}

.elementor-widget .es-genre-tag:hover {
    background: var(--ensemble-primary, #667eea);
    color: var(--ensemble-button-text, #ffffff);
    border-color: var(--ensemble-primary, #667eea);
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

/* Elementor breakpoints integration */
/* Use CSS variables for responsive columns */
@media (max-width: 1024px) {
    .elementor-widget .es-grid {
        grid-template-columns: repeat(var(--ensemble-grid-columns-tablet, 2), 1fr);
    }
}

@media (max-width: 767px) {
    .elementor-widget .es-grid {
        grid-template-columns: repeat(var(--ensemble-grid-columns-mobile, 1), 1fr);
    }
    
    .elementor-widget .es-calendar-view-buttons {
        flex-wrap: wrap;
    }
}

/* ============================================
   ELEMENTOR PREVIEW PLACEHOLDER
   ============================================ */

.es-elementor-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    background: var(--ensemble-muted-bg, #f5f5f5);
    border: 2px dashed var(--ensemble-card-border, #ccc);
    border-radius: var(--ensemble-card-radius, 8px);
    padding: 40px 20px;
    text-align: center;
}

.es-elementor-placeholder-icon {
    font-size: 48px;
    color: var(--ensemble-text-secondary, #999);
    margin-bottom: 15px;
}

.es-elementor-placeholder-text {
    font-size: var(--ensemble-small-size, 14px);
    color: var(--ensemble-text-secondary, #666);
}

/* ============================================
   DARK MODE SUPPORT
   ============================================ */

/* Dark mode now uses CSS variables, so it automatically adapts */
/* These are fallbacks for when prefers-color-scheme is detected */
@media (prefers-color-scheme: dark) {
    .es-elementor-placeholder {
        background: var(--ensemble-muted-bg, #2d2d2d);
        border-color: var(--ensemble-card-border, #444);
    }
    
    .es-elementor-placeholder-icon {
        color: var(--ensemble-text-secondary, #888);
    }
    
    .es-elementor-placeholder-text {
        color: var(--ensemble-text-secondary, #aaa);
    }
}

/* ============================================
   ELEMENTOR EDITOR SPECIFIC
   ============================================ */

/* Styles only visible in Elementor editor */
.elementor-editor-active .es-elementor-placeholder {
    cursor: pointer;
}

.elementor-editor-active .es-elementor-placeholder:hover {
    border-color: var(--ensemble-primary, #667eea);
    background: var(--ensemble-filter-bg, #f8fafc);
}

/* Widget selection indicator */
.elementor-editor-active .elementor-widget-ensemble-events-grid.elementor-element-edit-mode,
.elementor-editor-active .elementor-widget-ensemble-artists-grid.elementor-element-edit-mode,
.elementor-editor-active .elementor-widget-ensemble-calendar.elementor-element-edit-mode {
    outline: 2px solid var(--ensemble-primary, #667eea);
    outline-offset: 2px;
}
